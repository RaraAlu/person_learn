```shell
sudo wget http://fishros.com/install -O fishros && . fishros

sudo apt install gazebo
sudo apt install ros-humble-rqt-tf-tree
sudo apt install ros-humble-gazebo-*

// 安装 nmea_navsat_driver 的前提条件
sudo apt update
sudo apt install ros-humble-nmea-navsat-driver
sudo pip3 install transforms3d


```

#### 烧录雷达固件

```shell
xhost + && sudo docker run -it --rm --privileged -v /dev:/dev -v /tmp/.X11-unix:/tmp/.X11-unix -e DISPLAY=unix$DISPLAY fishros2/fishbot-tool:v1.0.0.20230108 python3 main.py
```

#### vscode C++ path

```
/opt/ros/humble/include/**
```

### [2.1 apt安装](https://fishros.com/d2lros2/#/humble/chapt10/get_started/2.Carto介绍及安装?id=_21-apt安装)

安装`carotgrapher`

```shell
sudo apt install ros-humble-cartographer
```

sudo apt install ros-humble-cartographer

需要注意我们不是直接使用，而是通过功能包进行相关操作，所以我们还需要安装下`cartographer``cartographer-ros``cartographer-ros`

```shell
sudo apt install ros-humble-cartographer-ros
```

安装`nav2`

```shell
 sudo apt install ros-humble-nav2-*
```



用到了`joint_state_publisher_gui`和`robot_state_publisher`两个包，如果你的系统没有安装这两个包，可以手动安装:

```shell
sudo apt install ros-$ROS_DISTRO-joint-state-publisher-gui ros-$ROS_DISTRO-robot-state-publisher

```

slam_toolbox 是一套用于2D SLAM的开源工具，使用 apt 可以方便的进行安装，命令如下：

```shell
sudo apt install ros-$ROS_DISTRO-slam-toolbox
```

### nav2 git 下载

```shell
git clone git@github.com:ros-planning/navigation2.git
```

### **[串口](https://github.com/ZhaoXiangBox/serial)**

```shell
git clone https://github.com/ZhaoXiangBox/serial
cd serial && mkdir build
cd build && cmake .. -DCMAKE_INSTALL_PREFIX=/usr/local
make && sudo make install
```

### Could not find a package configuration file provided by “GeographicLib“解决

```http
https://blog.csdn.net/xiaojinger_123/article/details/129181140
```

## **[鱼香ROS](https://gitee.com/ohhuo) / [transforms3d_cpp](https://gitee.com/ohhuo/transforms3d_cpp)**

```shell
git clone https://gitee.com/ohhuo/transforms3d_cpp.git
cd transforms3d_cpp
mkdir build && cd build
cmake ..
sudo make install
sudo ldconfig
```

### 相机驱动

```shell
pip install pydantic --upgrade
```

### 外网穿透

----------------------------

```shell
#用于远程电脑连接 4g ubuntu电脑
```

在Ubuntu命令终端中操作与在MobaXterm中大致相同，因为它们都使用标准的SSH命令行工具。以下是在Ubuntu命令终端中实现上述步骤的详细说明：

1. **从Ubuntu PC远程连接到公网服务器**： 打开Ubuntu终端，使用`ssh`命令连接到公网服务器：

```shell
ssh -p 22 pengt@39.108.82.170
```

将`AcountName`替换为公网服务器的账户名，`xxx.xxx.xxx.xxx`替换为公网服务器的IP地址或域名。如果连接成功，你需要输入账户的密码。

**在RK上设置反向SSH隧道**： 在树莓派的命令行终端中，输入以下命令来创建反向隧道：

```shell
ssh -p 22 -NR 39.108.82.170:9091:localhost:22 root@39.108.82.170
```

这里`xxx.xxx.xxx.xxx`是公网服务器的IP地址或域名，`AcountName`是公网服务器的账户名。输入命令后，系统会提示你输入密码。

**回到Ubuntu PC，设置本地SSH隧道**： 在你已经连接到公网服务器的终端会话中，开启一个新的SSH命令来创建本地隧道：

```shell
ssh -CNL "*:9092:localhost:9091" root@39.108.82.170
```

请替换`AcountName`为公网服务器的账户名。这条命令将在本地主机上的9092端口创建一个隧道连接到公网服务器上的9091端口。

**在Ubuntu PC上，通过SSH连接到RK3588**： 打开一个新的Ubuntu终端窗口，连接到本地的9092端口：

```shell
# 在这之前查看端口使用情况：
lsof -i :9091
```



```shell
ssh -p 9092 bhls@39.108.82.170
```

使用树莓派的用户名`pi`进行连接。系统将提示你输入树莓派的用户密码（默认为`raspberry`，除非你已经修改过）。

按照以上步骤，你应该能够通过Ubuntu终端成功地创建隧道并连接到树莓派。记住，任何时候你输入SSH命令，都可能需要确认连接（例如接受新的主机指纹）并输入账户的密码。如果你的账户使用SSH密钥认证，你需要确保密钥已经被加载到ssh-agent中。

#### 内网穿透自启动

1. 在您的本地机器上生成一个SSH密钥对（如果还没有的话）：

```shell
ssh-keygen -t rsa
```

按提示进行操作，可以为密钥设置密码或者留空以创建无密码密钥对。

1. 将生成的公钥（默认是`~/.ssh/id_rsa.pub`）复制到您的远程服务器上。可以手动做，也可以使用`ssh-copy-id`命令：

```shell
ssh-copy-id -p 22 -i ~/.ssh/id_rsa.pub root@39.108.82.170
```

这会要求您输入一次密码，来将密钥复制到远程服务器的`root`用户的`~/.ssh/authorized_keys`文件中。

##### 建Systemd服务单元文件

1. 首先，打开一个文本编辑器来创建一个新的Systemd服务单元文件。例如，使用`nano`:

```shell
sudo gedit /etc/systemd/system/ssh-tunnel.service
```

1. 然后，添加以下内容到文件中：

```makefile
[Unit]
Description=SSH reverse tunnel on port 9091
After=network.target

[Service]
User=您的本地用户名
ExecStart=/usr/bin/ssh -p 22 -i /home/您的本地用户名/.ssh/id_rsa -o "ExitOnForwardFailure yes" -o "ServerAliveInterval 60" -NR 39.108.82.170:9091:localhost:22 root@39.108.82.170
Restart=always
RestartSec=3
StartLimitIntervalSec=0

[Install]
WantedBy=multi-user.target

```

这个服务配置会在开机后（网络服务启动之后）自动执行指定的SSH命令。如果SSH连接断开，`Restart=always` 选项会让Systemd尝试重新启动服务。

1. 保存并关闭文件。
2. 重新加载Systemd配置以使新服务生效：

```shell
sudo systemctl daemon-reload
```

1. 启用服务以在开机时自动启动：

```shell
sudo systemctl enable ssh-tunnel.service
```

1. 现在，您可以手动启动服务来测试它：

```shell
sudo systemctl start ssh-tunnel.service
```